# tinyrenderer笔记

## 绘制线段

1. 给出两个点
2. 按照x或y进行像素步进
3. 为了代码简练, 固定从小到大进行步进即可, 因此需要判断起点和终点的位置进行交换
4. 为了防止线段断裂, 需要按照长边方向进行步进
5. 通过两次交换来使得遍历总是按照x来执行, 其中步进方向的设置只要用一个标记使绘制的时侯xy交换回去即可
6. 没有必要在每次步进的时侯都计算一次当前比例坐标t然后再计算短轴坐标, 可以提前计算每次步进的短轴增量然后复用
7. 因为短轴比较短, 因此可以让增量固定为1, 然后计算一个累进误差判断是否需要增加坐标, 每当误差大于0.5时, 向短边方向更新当前的短轴坐标1像素, 然后将累进误差减1
8. 而这个误差值也无需是浮点, 因为这个浮点数仅仅是为了与0.5进行比较. 从斜率的角度考虑, 当短轴的累计比长轴长时, 短轴就应该进行步进了, 因此我们可以用短边的长度\*2作为步进误差, 判断这个误差是否大于长边就可以起到浮点数对比0.5一样的效果, 这样可以省去浮点计算.